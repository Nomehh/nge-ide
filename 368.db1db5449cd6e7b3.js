"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[368],{6368:(m,f,i)=>{i.r(f),i.d(f,{CodeEditorModule:()=>n});var u=i(6895),p=i(5681),a=i(7211),l=i(5861),t=i(4650),h=i(1072);function g(s,e){1&s&&t._UZ(0,"nz-spin",3)}const E=function(){return{renderSideBySide:!1}};class d{constructor(e,o,r,c){this.monacoService=e,this.editorService=o,this.changeDetectorRef=r,this.notificationService=c,this.disposables=[],this.subscriptions=[],this.opening=!0}get showCodeEditor(){return!this.opening&&!this.isDiffMode}get showDiffEditor(){return!this.opening&&this.isDiffMode}get isDiffMode(){return!!this.request?.options?.diff}ngOnInit(){this.subscriptions.push(this.editor.onChangeRequest.subscribe(e=>{this.request=e,this.opening=!0,this.changeDetectorRef.detectChanges(),this.handleRequest()})),this.subscriptions.push(this.editorService.state.subscribe(e=>{this.codeEditor?.layout()}))}ngOnDestroy(){this.disposables.forEach(e=>e.dispose()),this.subscriptions.forEach(e=>e.unsubscribe()),this.codeEditor&&this.monacoService.onDisposeEditor(this.codeEditor)}onCreateEditor(e){this.monacoService.onCreateEditor(this.codeEditor=e),this.handleRequest()}onCreateDiffEditor(e){this.diffEditor=e,this.monacoService.onCreateEditor(e.getModifiedEditor()),this.handleRequest()}handleRequest(){var e=this;return(0,l.Z)(function*(){if(!e.codeEditor||!e.diffEditor||!e.request)return;const o=e.request.options||{};try{yield e.monacoService.open({uri:e.request.uri,editor:e.codeEditor,position:o.position})}catch(r){e.notificationService.publishError(r)}finally{e.opening=!1,e.changeDetectorRef.detectChanges()}e.handleDiffOptions(o)})()}handleDiffOptions(e){if(e.diff){const o=this.codeEditor.getModel();this.diffEditor.setModel({original:monaco.editor.createModel(e.diff,o.getLanguageId()),modified:monaco.editor.createModel(o.getValue(),o.getLanguageId())}),this.diffEditor.updateOptions({readOnly:this.codeEditor.getRawOptions().readOnly}),this.diffEditor.getModifiedEditor().focus()}}}d.\u0275fac=function(e){return new(e||d)(t.Y36(h.UD),t.Y36(h.GX),t.Y36(t.sBO),t.Y36(h.gq))},d.\u0275cmp=t.Xpm({type:d,selectors:[["ide-code-editor"]],inputs:{editor:"editor"},decls:3,vars:5,consts:[[3,"hidden","ready"],[3,"hidden","options","ready"],["class","center","nzSize","large",4,"ngIf"],["nzSize","large",1,"center"]],template:function(e,o){1&e&&(t.TgZ(0,"nge-monaco-editor",0),t.NdJ("ready",function(c){return o.onCreateEditor(c)}),t.qZA(),t.TgZ(1,"nge-monaco-diff-editor",1),t.NdJ("ready",function(c){return o.onCreateDiffEditor(c)}),t.qZA(),t.YNc(2,g,1,0,"nz-spin",2)),2&e&&(t.Q6J("hidden",!o.showCodeEditor),t.xp6(1),t.Q6J("hidden",!o.showDiffEditor)("options",t.DdM(4,E)),t.xp6(1),t.Q6J("ngIf",o.opening))},dependencies:[u.O5,p.W,a.RI,a.fW],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%;position:relative}.center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"],changeDetection:0});class n{constructor(){this.component=d}}n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,p.j,a.vS]})}}]);