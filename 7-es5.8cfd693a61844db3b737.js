function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{PNHn:function(e,t,i){"use strict";i.r(t),i.d(t,"CodeEditorModule",(function(){return p}));var n=i("An66"),o=i("SNHG"),r=i("2Ekg"),s=i("D57K"),c=i("kZht"),d=i("l0rr");function a(e,t){1&e&&c.Rb(0,"nz-spin",3)}var u,f,h=function(){return{renderSideBySide:!1}},l=((f=function(){function e(t,i,n,o){_classCallCheck(this,e),this.monacoService=t,this.editorService=i,this.changeDetectorRef=n,this.notificationService=o,this.disposables=[],this.subscriptions=[],this.opening=!0}return _createClass(e,[{key:"showCodeEditor",get:function(){return!this.opening&&!this.isDiffMode}},{key:"showDiffEditor",get:function(){return!this.opening&&this.isDiffMode}},{key:"isDiffMode",get:function(){var e,t;return!!(null===(t=null===(e=this.request)||void 0===e?void 0:e.options)||void 0===t?void 0:t.diff)}},{key:"ngOnInit",value:function(){var e=this;this.subscriptions.push(this.editor.onChangeRequest.subscribe((function(t){e.request=t,e.opening=!0,e.changeDetectorRef.detectChanges(),e.handleRequest()}))),this.subscriptions.push(this.editorService.state.subscribe((function(t){var i;null===(i=e.codeEditor)||void 0===i||i.layout()})))}},{key:"ngOnDestroy",value:function(){this.disposables.forEach((function(e){return e.dispose()})),this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.codeEditor&&this.monacoService.onDisposeEditor(this.codeEditor)}},{key:"onCreateEditor",value:function(e){this.monacoService.onCreateEditor(this.codeEditor=e),this.handleRequest()}},{key:"onCreateDiffEditor",value:function(e){this.diffEditor=e,this.monacoService.onCreateEditor(e.getModifiedEditor()),this.handleRequest()}},{key:"handleRequest",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.codeEditor&&this.diffEditor&&this.request){e.next=2;break}return e.abrupt("return");case 2:return t=this.request.options||{},e.prev=3,e.next=6,this.monacoService.open({uri:this.request.uri,editor:this.codeEditor,position:t.position});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),this.notificationService.publishError(e.t0);case 11:return e.prev=11,this.opening=!1,this.changeDetectorRef.detectChanges(),e.finish(11);case 14:this.handleDiffOptions(t);case 15:case"end":return e.stop()}}),e,this,[[3,8,11,14]])})))}},{key:"handleDiffOptions",value:function(e){if(e.diff){var t=this.codeEditor.getModel();this.diffEditor.setModel({original:monaco.editor.createModel(e.diff,t.getLanguageId()),modified:monaco.editor.createModel(t.getValue(),t.getLanguageId())}),this.diffEditor.updateOptions({readOnly:this.codeEditor.getRawOptions().readOnly}),this.diffEditor.getModifiedEditor().focus()}}}]),e}()).\u0275fac=function(e){return new(e||f)(c.Qb(d.t),c.Qb(d.k),c.Qb(c.h),c.Qb(d.u))},f.\u0275cmp=c.Kb({type:f,selectors:[["ide-code-editor"]],inputs:{editor:"editor"},decls:3,vars:5,consts:[[3,"hidden","ready"],[3,"hidden","options","ready"],["class","center","nzSize","large",4,"ngIf"],["nzSize","large",1,"center"]],template:function(e,t){1&e&&(c.Wb(0,"nge-monaco-editor",0),c.ec("ready",(function(e){return t.onCreateEditor(e)})),c.Vb(),c.Wb(1,"nge-monaco-diff-editor",1),c.ec("ready",(function(e){return t.onCreateDiffEditor(e)})),c.Vb(),c.Fc(2,a,1,0,"nz-spin",2)),2&e&&(c.oc("hidden",!t.showCodeEditor),c.Cb(1),c.oc("hidden",!t.showDiffEditor)("options",c.pc(4,h)),c.Cb(1),c.oc("ngIf",t.opening))},directives:[r.E,r.D,n.k,o.a],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%;position:relative}.center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"],changeDetection:0}),f),p=((u=function e(){_classCallCheck(this,e),this.component=l}).\u0275mod=c.Ob({type:u}),u.\u0275inj=c.Nb({factory:function(e){return new(e||u)},imports:[[n.c,o.b,r.G]]}),u)}}]);