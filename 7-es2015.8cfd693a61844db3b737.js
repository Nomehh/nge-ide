(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{PNHn:function(t,i,e){"use strict";e.r(i),e.d(i,"CodeEditorModule",(function(){return u}));var o=e("An66"),n=e("SNHG"),s=e("2Ekg"),r=e("D57K"),d=e("kZht"),c=e("l0rr");function h(t,i){1&t&&d.Rb(0,"nz-spin",3)}const a=function(){return{renderSideBySide:!1}};let f=(()=>{class t{constructor(t,i,e,o){this.monacoService=t,this.editorService=i,this.changeDetectorRef=e,this.notificationService=o,this.disposables=[],this.subscriptions=[],this.opening=!0}get showCodeEditor(){return!this.opening&&!this.isDiffMode}get showDiffEditor(){return!this.opening&&this.isDiffMode}get isDiffMode(){var t,i;return!!(null===(i=null===(t=this.request)||void 0===t?void 0:t.options)||void 0===i?void 0:i.diff)}ngOnInit(){this.subscriptions.push(this.editor.onChangeRequest.subscribe(t=>{this.request=t,this.opening=!0,this.changeDetectorRef.detectChanges(),this.handleRequest()})),this.subscriptions.push(this.editorService.state.subscribe(t=>{var i;null===(i=this.codeEditor)||void 0===i||i.layout()}))}ngOnDestroy(){this.disposables.forEach(t=>t.dispose()),this.subscriptions.forEach(t=>t.unsubscribe()),this.codeEditor&&this.monacoService.onDisposeEditor(this.codeEditor)}onCreateEditor(t){this.monacoService.onCreateEditor(this.codeEditor=t),this.handleRequest()}onCreateDiffEditor(t){this.diffEditor=t,this.monacoService.onCreateEditor(t.getModifiedEditor()),this.handleRequest()}handleRequest(){return Object(r.a)(this,void 0,void 0,(function*(){if(!this.codeEditor||!this.diffEditor||!this.request)return;const t=this.request.options||{};try{yield this.monacoService.open({uri:this.request.uri,editor:this.codeEditor,position:t.position})}catch(i){this.notificationService.publishError(i)}finally{this.opening=!1,this.changeDetectorRef.detectChanges()}this.handleDiffOptions(t)}))}handleDiffOptions(t){if(t.diff){const i=this.codeEditor.getModel();this.diffEditor.setModel({original:monaco.editor.createModel(t.diff,i.getLanguageId()),modified:monaco.editor.createModel(i.getValue(),i.getLanguageId())}),this.diffEditor.updateOptions({readOnly:this.codeEditor.getRawOptions().readOnly}),this.diffEditor.getModifiedEditor().focus()}}}return t.\u0275fac=function(i){return new(i||t)(d.Qb(c.t),d.Qb(c.k),d.Qb(d.h),d.Qb(c.u))},t.\u0275cmp=d.Kb({type:t,selectors:[["ide-code-editor"]],inputs:{editor:"editor"},decls:3,vars:5,consts:[[3,"hidden","ready"],[3,"hidden","options","ready"],["class","center","nzSize","large",4,"ngIf"],["nzSize","large",1,"center"]],template:function(t,i){1&t&&(d.Wb(0,"nge-monaco-editor",0),d.ec("ready",(function(t){return i.onCreateEditor(t)})),d.Vb(),d.Wb(1,"nge-monaco-diff-editor",1),d.ec("ready",(function(t){return i.onCreateDiffEditor(t)})),d.Vb(),d.Fc(2,h,1,0,"nz-spin",2)),2&t&&(d.oc("hidden",!i.showCodeEditor),d.Cb(1),d.oc("hidden",!i.showDiffEditor)("options",d.pc(4,a)),d.Cb(1),d.oc("ngIf",i.opening))},directives:[s.E,s.D,o.k,n.a],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%;position:relative}.center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"],changeDetection:0}),t})(),u=(()=>{class t{constructor(){this.component=f}}return t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({factory:function(i){return new(i||t)},imports:[[o.c,n.b,s.G]]}),t})()}}]);