"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[368],{6368:(E,f,i)=>{i.r(f),i.d(f,{CodeEditorModule:()=>n});var u=i(6895),p=i(5681),a=i(7211),l=i(5861),o=i(4650),h=i(1072);function g(r,e){1&r&&o._UZ(0,"nz-spin",3)}const m=function(){return{renderSideBySide:!1}};class s{constructor(e,t,d,c){this.monacoService=e,this.editorService=t,this.changeDetectorRef=d,this.notificationService=c,this.disposables=[],this.subscriptions=[],this.opening=!0}get showCodeEditor(){return!this.opening&&!this.isDiffMode}get showDiffEditor(){return!this.opening&&this.isDiffMode}get isDiffMode(){return!!this.request?.options?.diff}ngOnInit(){this.subscriptions.push(this.editor.onChangeRequest.subscribe(e=>{this.request=e,this.opening=!0,this.changeDetectorRef.markForCheck(),this.handleRequest()})),this.subscriptions.push(this.editorService.editorGroups.subscribe(()=>{setTimeout(()=>{this.codeEditor?.layout(),this.changeDetectorRef.markForCheck()},300)}))}ngOnDestroy(){this.disposables.forEach(e=>e.dispose()),this.subscriptions.forEach(e=>e.unsubscribe()),this.codeEditor&&this.monacoService.onDisposeEditor(this.codeEditor)}onCreateEditor(e){this.monacoService.onCreateEditor(this.codeEditor=e),this.handleRequest()}onCreateDiffEditor(e){this.diffEditor=e,this.monacoService.onCreateEditor(e.getModifiedEditor()),this.handleRequest()}handleRequest(){var e=this;return(0,l.Z)(function*(){if(!e.codeEditor||!e.diffEditor||!e.request)return;const t=e.request.options||{};try{yield e.monacoService.open({uri:e.request.uri,editor:e.codeEditor,position:t.position})}catch(d){e.notificationService.publishError(d)}finally{e.opening=!1,e.changeDetectorRef.markForCheck()}e.handleDiffOptions(t)})()}handleDiffOptions(e){if(e.diff){const t=this.codeEditor.getModel();this.diffEditor.setModel({original:monaco.editor.createModel(e.diff,t.getLanguageId()),modified:monaco.editor.createModel(t.getValue(),t.getLanguageId())}),this.diffEditor.updateOptions({readOnly:this.codeEditor.getRawOptions().readOnly}),this.diffEditor.getModifiedEditor().focus()}}}s.\u0275fac=function(e){return new(e||s)(o.Y36(h.UD),o.Y36(h.GX),o.Y36(o.sBO),o.Y36(h.gq))},s.\u0275cmp=o.Xpm({type:s,selectors:[["ide-code-editor"]],inputs:{editor:"editor"},decls:3,vars:5,consts:[[3,"hidden","ready"],[3,"hidden","options","ready"],["class","center","nzSize","large",4,"ngIf"],["nzSize","large",1,"center"]],template:function(e,t){1&e&&(o.TgZ(0,"nge-monaco-editor",0),o.NdJ("ready",function(c){return t.onCreateEditor(c)}),o.qZA(),o.TgZ(1,"nge-monaco-diff-editor",1),o.NdJ("ready",function(c){return t.onCreateDiffEditor(c)}),o.qZA(),o.YNc(2,g,1,0,"nz-spin",2)),2&e&&(o.Q6J("hidden",!t.showCodeEditor),o.xp6(1),o.Q6J("hidden",!t.showDiffEditor)("options",o.DdM(4,m)),o.xp6(1),o.Q6J("ngIf",t.opening))},dependencies:[u.O5,p.W,a.RI,a.fW],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%;position:relative}.center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"]});class n{constructor(){this.component=s}}n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[u.ez,p.j,a.vS]})}}]);